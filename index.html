<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Random Joke with TTS</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 2em;
      background: #f0f0f0;
    }
    #joke {
      font-size: 1.5em;
      margin: 1em 0;
    }
    button {
      font-size: 1em;
      padding: 0.5em 1em;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>Enjoy a Random Joke!</h1>
  <div id="joke">Loading...</div>
  <button id="newJoke">Another Joke</button>

  <script>
    // Function to fetch a random joke from icanhazdadjoke
    async function fetchJoke() {
      try {
        const response = await fetch('https://icanhazdadjoke.com/', {
          headers: { 'Accept': 'application/json' }
        });
        const data = await response.json();
        return data.joke;
      } catch (error) {
        console.error('Error fetching joke:', error);
        return "Oops, I couldn't fetch a joke this time!";
      }
    }

    // Function to speak the joke using the Web Speech API
    function speakJoke(jokeText) {
      if ('speechSynthesis' in window) {
        const utterance = new SpeechSynthesisUtterance(jokeText);
        // Optionally customize voice, rate, or pitch here:
        // utterance.rate = 1.0; utterance.pitch = 1.0;
        window.speechSynthesis.speak(utterance);
      } else {
        console.warn('Speech Synthesis not supported in this browser.');
      }
    }

    // Function to update the joke on the page and speak it
    async function updateJoke() {
      const jokeText = await fetchJoke();
      document.getElementById('joke').innerText = jokeText;
      speakJoke(jokeText);
    }

    // Set up event listeners
    document.getElementById('newJoke').addEventListener('click', updateJoke);
    window.addEventListener('load', updateJoke);
  </script>
</body>
</html>
